<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>单机直连配置 - IB网络拓扑规划</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #ffffff 0%, #f1f8ff 50%, #f0f9f4 100%);
            color: #2c3e50;
            height: 100vh;
            overflow: hidden;
            position: relative;
        }

        /* 装饰元素 - 右上角圆点网格 */
        .decoration-dots {
            position: absolute;
            top: 30px;
            right: 30px;
            width: 10px;
            height: 10px;
            background: #3b82f6;
            border-radius: 50%;
            opacity: 0.6;
            box-shadow:
                20px 0 0 rgba(59, 130, 246, 0.5),
                40px 0 0 rgba(59, 130, 246, 0.4),
                0 20px 0 rgba(59, 130, 246, 0.4),
                20px 20px 0 rgba(59, 130, 246, 0.3),
                40px 20px 0 rgba(59, 130, 246, 0.25),
                0 40px 0 rgba(59, 130, 246, 0.3),
                20px 40px 0 rgba(59, 130, 246, 0.2),
                40px 40px 0 rgba(59, 130, 246, 0.15);
        }

        /* 装饰元素 - 左下角几何方框 */
        .decoration-boxes {
            position: absolute;
            bottom: 40px;
            left: 40px;
            width: 60px;
            height: 60px;
            border: 3px solid #22c55e;
            transform: rotate(15deg);
            opacity: 0.4;
        }

        .decoration-boxes::before {
            content: '';
            position: absolute;
            top: -10px;
            left: -10px;
            width: 40px;
            height: 40px;
            border: 3px solid #22c55e;
            opacity: 0.6;
        }

        .decoration-boxes::after {
            content: '';
            position: absolute;
            bottom: -8px;
            right: -8px;
            width: 30px;
            height: 30px;
            border: 3px solid #22c55e;
            opacity: 0.3;
        }

        /* 紧凑型页眉 */
        .slide-header {
            display: flex;
            align-items: center;
            padding: 20px 60px;
            gap: 20px;
            border-bottom: 1px solid rgba(59, 130, 246, 0.15);
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
        }

        .nvidia-logo svg {
            height: 30px;
            width: auto;
        }

        .title-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .main-title {
            font-size: 1.8rem;
            font-weight: 700;
            background: linear-gradient(90deg, #1e40af, #3b82f6, #22c55e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            font-size: 0.85rem;
            color: #64748b;
            font-weight: 500;
        }

        .breadcrumb {
            font-size: 0.75rem;
            color: #94a3b8;
            display: flex;
            align-items: center;
            gap: 8px;
            white-space: nowrap;
        }

        .breadcrumb a {
            color: #3b82f6;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .breadcrumb a:hover {
            color: #1e40af;
        }

        /* 主内容区 */
        .main-content {
            padding: 40px 60px;
            height: calc(100vh - 180px);
            overflow-y: auto;
        }

        /* 双栏布局 */
        .content-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .content-section {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            padding: 25px;
            border-radius: 12px;
            border: 1px solid rgba(59, 130, 246, 0.1);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        }

        .section-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #1e40af;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #3b82f6;
        }

        .content-section h3 {
            font-size: 1.1rem;
            font-weight: 600;
            color: #3b82f6;
            margin: 15px 0 10px 0;
        }

        .content-section ul {
            list-style: none;
            padding-left: 0;
        }

        .content-section li {
            position: relative;
            padding-left: 24px;
            margin-bottom: 12px;
            line-height: 1.6;
            color: #475569;
        }

        .content-section li::before {
            content: '▸';
            position: absolute;
            left: 0;
            color: #22c55e;
            font-weight: bold;
        }

        /* 代码块样式 */
        .code-block {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-left: 4px solid #3b82f6;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.6;
            color: #334155;
            overflow-x: auto;
        }

        .code-block .comment {
            color: #22c55e;
        }

        /* 核心优势总结 */
        .advantages-section {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-top: 30px;
        }

        .advantage-card {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.05), rgba(34, 197, 94, 0.05));
            border: 1px solid rgba(59, 130, 246, 0.2);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .advantage-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(59, 130, 246, 0.2);
        }

        .advantage-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .advantage-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #1e40af;
            margin-bottom: 8px;
        }

        .advantage-desc {
            font-size: 0.9rem;
            color: #64748b;
            line-height: 1.5;
        }

        /* 底部信息 */
        .slide-footer {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 60px;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-top: 1px solid rgba(59, 130, 246, 0.15);
        }

        .presenter-info {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .presenter-name {
            font-size: 1rem;
            font-weight: 600;
            color: #1e293b;
        }

        .presenter-title {
            font-size: 0.9rem;
            color: #64748b;
        }

        .slide-number {
            background: linear-gradient(45deg, rgba(59, 130, 246, 0.1), rgba(34, 197, 94, 0.1));
            padding: 8px 16px;
            border-radius: 15px;
            font-size: 0.85rem;
            color: #475569;
            font-weight: 500;
        }

        /* 导航控制 */
        .navigation-controls {
            position: fixed;
            bottom: 70px;
            right: 60px;
            display: flex;
            gap: 10px;
        }

        .nav-button {
            background: linear-gradient(45deg, rgba(59, 130, 246, 0.1), rgba(34, 197, 94, 0.1));
            border: 1px solid rgba(59, 130, 246, 0.3);
            color: #1e40af;
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .nav-button:hover {
            background: linear-gradient(45deg, #3b82f6, #22c55e);
            color: #ffffff;
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(59, 130, 246, 0.3);
        }

        /* 动画效果 */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .content-section {
            animation: fadeInUp 0.6s ease;
        }

        .content-section:nth-child(1) { animation-delay: 0.1s; }
        .content-section:nth-child(2) { animation-delay: 0.2s; }
        .advantage-card:nth-child(1) { animation: fadeInUp 0.6s ease 0.3s both; }
        .advantage-card:nth-child(2) { animation: fadeInUp 0.6s ease 0.4s both; }
        .advantage-card:nth-child(3) { animation: fadeInUp 0.6s ease 0.5s both; }

        /* 响应式设计 */
        @media (max-width: 1200px) {
            .content-grid {
                grid-template-columns: 1fr;
            }
            .advantages-section {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .slide-header,
            .main-content,
            .slide-footer {
                padding-left: 30px;
                padding-right: 30px;
            }
            .navigation-controls {
                right: 30px;
            }
        }
    </style>
</head>
<body>
    <div class="decoration-dots"></div>
    <div class="decoration-boxes"></div>

    <!-- 页眉 -->
    <header class="slide-header">
        <div class="nvidia-logo">
            <svg xmlns="http://www.w3.org/2000/svg" width="120" height="80" viewBox="0 0 48 32" fill="none">
                <path d="M17.9101 9.54961V6.65962C18.1893 6.64003 18.4704 6.624 18.7567 6.6151C26.6044 6.36581 31.7531 13.4083 31.7531 13.4083C31.7531 13.4083 26.1926 21.1897 20.2308 21.1897C19.3718 21.1897 18.6029 21.0508 17.9101 20.8158V12.0496C20.9661 12.4218 21.5794 13.7804 23.4158 16.8645L27.5005 13.394C27.5005 13.394 24.5188 9.45345 19.492 9.45345C18.9458 9.45345 18.4227 9.49263 17.9083 9.54783L17.9101 9.54961ZM17.9083 0V4.31807C18.1893 4.29492 18.4721 4.27711 18.7549 4.26643C29.6675 3.89606 36.7781 13.2836 36.7781 13.2836C36.7781 13.2836 28.6123 23.2873 20.1035 23.2873C19.3241 23.2873 18.5941 23.2143 17.9083 23.0932V25.7624C18.4951 25.8372 19.1031 25.8817 19.7359 25.8817C27.6525 25.8817 33.3792 21.8094 38.9239 16.9874C39.843 17.7281 43.606 19.5319 44.3802 20.3225C39.1077 24.7688 26.8236 28.3515 19.8579 28.3515C19.1862 28.3515 18.5411 28.3105 17.9083 28.25V32H48V0.00178103H17.9101L17.9083 0ZM17.9083 20.814V23.0932C10.5856 21.7773 8.55293 14.1098 8.55293 14.1098C8.55293 14.1098 12.0685 10.1853 17.9083 9.54961V12.0496C17.9083 12.0496 17.9012 12.0496 17.8977 12.0496C14.8329 11.6793 12.4397 14.5639 12.4397 14.5639C12.4397 14.5639 13.7812 19.4197 17.9101 20.8175L17.9083 20.814ZM4.90481 13.7804C4.90481 13.7804 9.24403 7.32914 17.9101 6.6614V4.32163C8.31255 5.09799 0 13.2872 0 13.2872C0 13.2872 4.70685 26.9982 17.9101 28.2535V25.766C8.22064 24.5373 4.90481 13.7804 4.90481 13.7804Z" fill="#76B900"/>
            </svg>
        </div>
        <div class="title-area">
            <h1 class="main-title">IB网络拓扑规划</h1>
            <p class="subtitle">第二章：单机直连配置</p>
        </div>
        <nav class="breadcrumb">
            <a href="../index.html">首页</a> →
            <a href="../catalog.html">目录</a> →
            <a href="index.html">第二章</a> →
            <span>单机直连</span>
        </nav>
    </header>

    <!-- 主内容 -->
    <main class="main-content">
        <div class="content-grid">
            <!-- 概念与优势 -->
            <div class="content-section">
                <h2 class="section-title">概念与优势</h2>

                <h3>定义</h3>
                <ul>
                    <li>使用一根InfiniBand线缆直接连接两台服务器上的IB网卡(HCA)</li>
                    <li>中间不经过任何交换机，也称为点对点连接</li>
                    <li>最简单的IB网络拓扑结构</li>
                </ul>

                <h3>核心优势</h3>
                <ul>
                    <li><strong>成本效益</strong>：无需昂贵的IB交换机，硬件投资最小</li>
                    <li><strong>极致性能</strong>：提供极高带宽和极低延迟的直连通信</li>
                    <li><strong>配置简单</strong>：设置过程简单，易于快速部署</li>
                    <li><strong>适用场景</strong>：双节点集群、测试环境、高速互联场景</li>
                </ul>

                <h3>应用场景</h3>
                <ul>
                    <li>双节点高性能计算集群</li>
                    <li>AI训练环境中的GPU直连</li>
                    <li>测试环境搭建和性能验证</li>
                    <li>特定应用的服务器高速互联</li>
                </ul>
            </div>

            <!-- 配置要点 -->
            <div class="content-section">
                <h2 class="section-title">配置要点</h2>

                <h3>硬件要求</h3>
                <ul>
                    <li>两台装有IB网卡(HCA)的服务器</li>
                    <li>一根合适的InfiniBand线缆(DAC或AOC)，标准IB线缆</li>
                    <li>确认网卡端口速率匹配(如HDR 200Gb/s，NDR 400Gb/s)</li>
                </ul>

                <h3>子网管理器(SM)配置</h3>
                <ul>
                    <li>即使没有交换机，IB网络仍需要子网管理器</li>
                    <li>必须在其中一台或两台服务器上运行OpenSM，建议配置SM冗余以提高可靠性</li>
                    <li>SM负责初始化链路和分配本地ID(LID), 激活IB子网</li>
                </ul>

                <div class="code-block">
<span class="comment"># 启动 OpenSM (子网管理器)</span>
sudo systemctl enable opensmd --now
                </div>

                <h3>网络配置</h3>
                <ul>
                    <li>启用IP over InfiniBand (IPoIB)协议</li>
                    <li>查看接口并为接口设置IP地址</li>
                </ul>

                <div class="code-block">
<span class="comment"># 配置 IPoIB 网络接口</span>
sudo ip addr add 192.168.1.1/24 dev ib0<br>
sudo ip link set ib0 up
                </div>
            </div>
        </div>

        <!-- 核心优势总结 -->
        <div class="advantages-section">
            <div class="advantage-card">
                <div class="advantage-icon">💰</div>
                <div class="advantage-title">低成本方案</div>
                <div class="advantage-desc">无需交换机，仅需线缆和网卡，是最经济的IB网络配置方式</div>
            </div>
            <div class="advantage-card">
                <div class="advantage-icon">⚡</div>
                <div class="advantage-title">极致性能</div>
                <div class="advantage-desc">零交换延迟，直连通信，充分发挥IB网络的高带宽低延迟特性</div>
            </div>
            <div class="advantage-card">
                <div class="advantage-icon">🔧</div>
                <div class="advantage-title">配置简单</div>
                <div class="advantage-desc">安装OpenSM，配置IPoIB，即可快速建立高速网络连接</div>
            </div>
        </div>
    </main>

    <!-- 底部信息 -->
    <footer class="slide-footer">
        <div class="presenter-info">
            <div class="presenter-name">Vincent / CTO</div>
            <div class="presenter-title">吴昌辉</div>
        </div>
        <div class="slide-number">2-1 / 2-3</div>
    </footer>

    <!-- 导航控制 -->
    <div class="navigation-controls">
        <button class="nav-button" onclick="prevPage()">← 上一页</button>
        <button class="nav-button" onclick="nextPage()">下一页 →</button>
    </div>

    <script>
        function prevPage() {
            window.location.href = 'index.html';
        }

        function nextPage() {
            window.location.href = 'fat-tree.html';
        }

        // 键盘导航
        document.addEventListener('keydown', function(e) {
            if (e.code === 'ArrowLeft') {
                e.preventDefault();
                prevPage();
            } else if (e.code === 'ArrowRight') {
                e.preventDefault();
                nextPage();
            } else if (e.code === 'Escape') {
                window.location.href = '../catalog.html';
            }
        });
    </script>
</body>
</html>
