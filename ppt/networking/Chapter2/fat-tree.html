<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>胖树拓扑设计 - IB网络拓扑规划</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #ffffff 0%, #f1f8ff 50%, #f0f9f4 100%);
            color: #2c3e50;
            height: 100vh;
            overflow: hidden;
            position: relative;
        }

        /* 装饰元素 - 右上角圆点网格 */
        .decoration-dots {
            position: absolute;
            top: 30px;
            right: 30px;
            width: 10px;
            height: 10px;
            background: #22c55e;
            border-radius: 50%;
            opacity: 0.6;
            box-shadow:
                20px 0 0 rgba(34, 197, 94, 0.5),
                40px 0 0 rgba(34, 197, 94, 0.4),
                0 20px 0 rgba(34, 197, 94, 0.4),
                20px 20px 0 rgba(34, 197, 94, 0.3),
                40px 20px 0 rgba(34, 197, 94, 0.25),
                0 40px 0 rgba(34, 197, 94, 0.3),
                20px 40px 0 rgba(34, 197, 94, 0.2),
                40px 40px 0 rgba(34, 197, 94, 0.15);
        }

        /* 装饰元素 - 左下角几何方框 */
        .decoration-boxes {
            position: absolute;
            bottom: 40px;
            left: 40px;
            width: 60px;
            height: 60px;
            border: 3px solid #3b82f6;
            transform: rotate(15deg);
            opacity: 0.4;
        }

        .decoration-boxes::before {
            content: '';
            position: absolute;
            top: -10px;
            left: -10px;
            width: 40px;
            height: 40px;
            border: 3px solid #3b82f6;
            opacity: 0.6;
        }

        .decoration-boxes::after {
            content: '';
            position: absolute;
            bottom: -8px;
            right: -8px;
            width: 30px;
            height: 30px;
            border: 3px solid #3b82f6;
            opacity: 0.3;
        }

        /* 紧凑型页眉 */
        .slide-header {
            display: flex;
            align-items: center;
            padding: 20px 60px;
            gap: 20px;
            border-bottom: 1px solid rgba(59, 130, 246, 0.15);
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
        }

        .nvidia-logo svg {
            height: 30px;
            width: auto;
        }

        .title-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .main-title {
            font-size: 1.8rem;
            font-weight: 700;
            background: linear-gradient(90deg, #1e40af, #3b82f6, #22c55e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            font-size: 0.85rem;
            color: #64748b;
            font-weight: 500;
        }

        .breadcrumb {
            font-size: 0.75rem;
            color: #94a3b8;
            display: flex;
            align-items: center;
            gap: 8px;
            white-space: nowrap;
        }

        .breadcrumb a {
            color: #3b82f6;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .breadcrumb a:hover {
            color: #1e40af;
        }

        /* 主内容区 */
        .main-content {
            padding: 40px 60px;
            height: calc(100vh - 180px);
            overflow-y: auto;
        }

        /* 双栏布局 */
        .content-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .content-section {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            padding: 25px;
            border-radius: 12px;
            border: 1px solid rgba(59, 130, 246, 0.1);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        }

        .content-section.full-width {
            grid-column: 1 / -1;
        }

        .section-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #1e40af;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #3b82f6;
        }

        .content-section h3 {
            font-size: 1.1rem;
            font-weight: 600;
            color: #22c55e;
            margin: 15px 0 10px 0;
        }

        .content-section ul {
            list-style: none;
            padding-left: 0;
        }

        .content-section li {
            position: relative;
            padding-left: 24px;
            margin-bottom: 12px;
            line-height: 1.6;
            color: #475569;
        }

        .content-section li::before {
            content: '▸';
            position: absolute;
            left: 0;
            color: #22c55e;
            font-weight: bold;
        }

        .content-section li strong {
            color: #1e40af;
            font-weight: 600;
        }

        /* 拓扑可视化 */
        .topology-visual {
            display: grid;
            grid-template-rows: auto auto;
            gap: 30px;
            padding: 20px;
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.03), rgba(34, 197, 94, 0.03));
            border-radius: 12px;
        }

        .topology-layer {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        .layer-label {
            font-size: 1.1rem;
            font-weight: 600;
            padding: 8px 20px;
            border-radius: 20px;
            color: white;
            text-align: center;
        }

        .layer-label.spine {
            background: linear-gradient(90deg, #22c55e, #76b900);
        }

        .layer-label.leaf {
            background: linear-gradient(90deg, #3b82f6, #1e40af);
        }

        .switches-row {
            display: flex;
            gap: 20px;
            justify-content: center;
            align-items: center;
        }

        .switch-node {
            width: 80px;
            height: 60px;
            background: white;
            border: 2px solid;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: 600;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .switch-node.spine {
            border-color: #22c55e;
            color: #22c55e;
        }

        .switch-node.leaf {
            border-color: #3b82f6;
            color: #3b82f6;
        }

        .switch-node:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }

        /* 连接线提示 */
        .connection-hint {
            text-align: center;
            color: #64748b;
            font-size: 0.9rem;
            font-style: italic;
            margin: 10px 0;
        }

        /* 设计原则卡片 */
        .principles-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-top: 20px;
        }

        .principle-card {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.05), rgba(34, 197, 94, 0.05));
            border: 1px solid rgba(59, 130, 246, 0.2);
            padding: 20px;
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .principle-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(59, 130, 246, 0.2);
        }

        .principle-title {
            font-size: 1.05rem;
            font-weight: 600;
            color: #1e40af;
            margin-bottom: 10px;
        }

        .principle-desc {
            font-size: 0.9rem;
            color: #64748b;
            line-height: 1.6;
        }

        /* 底部信息 */
        .slide-footer {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 60px;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-top: 1px solid rgba(59, 130, 246, 0.15);
        }

        .presenter-info {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .presenter-name {
            font-size: 1rem;
            font-weight: 600;
            color: #1e293b;
        }

        .presenter-title {
            font-size: 0.9rem;
            color: #64748b;
        }

        .slide-number {
            background: linear-gradient(45deg, rgba(59, 130, 246, 0.1), rgba(34, 197, 94, 0.1));
            padding: 8px 16px;
            border-radius: 15px;
            font-size: 0.85rem;
            color: #475569;
            font-weight: 500;
        }

        /* 导航控制 */
        .navigation-controls {
            position: fixed;
            bottom: 70px;
            right: 60px;
            display: flex;
            gap: 10px;
        }

        .nav-button {
            background: linear-gradient(45deg, rgba(59, 130, 246, 0.1), rgba(34, 197, 94, 0.1));
            border: 1px solid rgba(59, 130, 246, 0.3);
            color: #1e40af;
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .nav-button:hover {
            background: linear-gradient(45deg, #3b82f6, #22c55e);
            color: #ffffff;
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(59, 130, 246, 0.3);
        }

        /* 动画效果 */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .content-section {
            animation: fadeInUp 0.6s ease;
        }

        .content-section:nth-child(1) { animation-delay: 0.1s; }
        .content-section:nth-child(2) { animation-delay: 0.2s; }
        .content-section:nth-child(3) { animation-delay: 0.3s; }

        /* 响应式设计 */
        @media (max-width: 1200px) {
            .content-grid {
                grid-template-columns: 1fr;
            }
            .principles-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .slide-header,
            .main-content,
            .slide-footer {
                padding-left: 30px;
                padding-right: 30px;
            }
            .navigation-controls {
                right: 30px;
            }
            .switches-row {
                flex-wrap: wrap;
            }
        }
    </style>
</head>
<body>
    <div class="decoration-dots"></div>
    <div class="decoration-boxes"></div>

    <!-- 页眉 -->
    <header class="slide-header">
        <div class="nvidia-logo">
            <svg xmlns="http://www.w3.org/2000/svg" width="120" height="80" viewBox="0 0 48 32" fill="none">
                <path d="M17.9101 9.54961V6.65962C18.1893 6.64003 18.4704 6.624 18.7567 6.6151C26.6044 6.36581 31.7531 13.4083 31.7531 13.4083C31.7531 13.4083 26.1926 21.1897 20.2308 21.1897C19.3718 21.1897 18.6029 21.0508 17.9101 20.8158V12.0496C20.9661 12.4218 21.5794 13.7804 23.4158 16.8645L27.5005 13.394C27.5005 13.394 24.5188 9.45345 19.492 9.45345C18.9458 9.45345 18.4227 9.49263 17.9083 9.54783L17.9101 9.54961ZM17.9083 0V4.31807C18.1893 4.29492 18.4721 4.27711 18.7549 4.26643C29.6675 3.89606 36.7781 13.2836 36.7781 13.2836C36.7781 13.2836 28.6123 23.2873 20.1035 23.2873C19.3241 23.2873 18.5941 23.2143 17.9083 23.0932V25.7624C18.4951 25.8372 19.1031 25.8817 19.7359 25.8817C27.6525 25.8817 33.3792 21.8094 38.9239 16.9874C39.843 17.7281 43.606 19.5319 44.3802 20.3225C39.1077 24.7688 26.8236 28.3515 19.8579 28.3515C19.1862 28.3515 18.5411 28.3105 17.9083 28.25V32H48V0.00178103H17.9101L17.9083 0ZM17.9083 20.814V23.0932C10.5856 21.7773 8.55293 14.1098 8.55293 14.1098C8.55293 14.1098 12.0685 10.1853 17.9083 9.54961V12.0496C17.9083 12.0496 17.9012 12.0496 17.8977 12.0496C14.8329 11.6793 12.4397 14.5639 12.4397 14.5639C12.4397 14.5639 13.7812 19.4197 17.9101 20.8175L17.9083 20.814ZM4.90481 13.7804C4.90481 13.7804 9.24403 7.32914 17.9101 6.6614V4.32163C8.31255 5.09799 0 13.2872 0 13.2872C0 13.2872 4.70685 26.9982 17.9101 28.2535V25.766C8.22064 24.5373 4.90481 13.7804 4.90481 13.7804Z" fill="#76B900"/>
            </svg>
        </div>
        <div class="title-area">
            <h1 class="main-title">IB网络拓扑规划</h1>
            <p class="subtitle">第二章：胖树拓扑设计</p>
        </div>
        <nav class="breadcrumb">
            <a href="../index.html">首页</a> →
            <a href="../catalog.html">目录</a> →
            <a href="index.html">第二章</a> →
            <span>胖树拓扑</span>
        </nav>
    </header>

    <!-- 主内容 -->
    <main class="main-content">
        <div class="content-grid">
            <!-- 胖树拓扑简介 -->
            <div class="content-section">
                <h2 class="section-title">胖树拓扑简介</h2>

                <h3>核心思想</h3>
                <ul>
                    <li><strong>恒定带宽</strong>：从任何节点到根节点的路径带宽恒定</li>
                    <li><strong>"胖"树结构</strong>：越靠近网络核心(根)，链路总带宽越大</li>
                    <li><strong>无阻塞通信</strong>：任意两节点间可获得无阻塞或低阻塞带宽</li>
                    <li><strong>性能优化</strong>：HPC和AI集群应用最广泛的拓扑结构</li>
                </ul>

                <h3>网络结构</h3>
                <ul>
                    <li><strong>接入层(Leaf Switches)</strong>：底层交换机，直接连接计算节点和存储节点</li>
                    <li><strong>核心层(Spine Switches)</strong>：上层交换机，仅连接接入层交换机，负责流量转发</li>
                    <li><strong>分层架构</strong>：典型的两层或三层交换机构成</li>
                </ul>

                <h3>主要优势</h3>
                <ul>
                    <li><strong>高带宽</strong>：全对分带宽(Full Bisection Bandwidth)设计</li>
                    <li><strong>可扩展</strong>：通过增加交换机和层级支持数千节点规模</li>
                    <li><strong>低延迟</strong>：固定跳数确保稳定可预测的通信延迟</li>
                    <li><strong>容错性</strong>：多路径冗余提供高可用性保障</li>
                </ul>
            </div>

            <!-- 拓扑可视化 -->
            <div class="content-section">
                <h2 class="section-title">拓扑结构示意</h2>
                <div class="topology-visual">
                    <div class="topology-layer">
                        <div class="layer-label spine">核心层 (Spine Switches)</div>
                        <div class="switches-row">
                            <div class="switch-node spine">Spine 1</div>
                            <div class="switch-node spine">Spine 2</div>
                            <div class="switch-node spine">Spine 3</div>
                        </div>
                    </div>

                    <div class="connection-hint">↕ 全互联 (每个Leaf连接所有Spine)</div>

                    <div class="topology-layer">
                        <div class="layer-label leaf">接入层 (Leaf Switches)</div>
                        <div class="switches-row">
                            <div class="switch-node leaf">Leaf 1</div>
                            <div class="switch-node leaf">Leaf 2</div>
                            <div class="switch-node leaf">Leaf 3</div>
                            <div class="switch-node leaf">Leaf 4</div>
                        </div>
                    </div>

                    <div class="connection-hint">↓ 连接计算节点、GPU服务器、存储</div>
                </div>
            </div>

            <!-- 设计原则 -->
            <div class="content-section full-width">
                <h2 class="section-title">设计原则与考量</h2>
                <div class="principles-grid">
                    <div class="principle-card">
                        <div class="principle-title">收敛比 (Blocking Factor)</div>
                        <div class="principle-desc">
                            <strong>1:1</strong> - 完全无阻塞网络<br>
                            <strong>3:1</strong> - 平衡成本与性能的常见选择<br>
                            需根据应用场景和预算确定收敛比
                        </div>
                    </div>

                    <div class="principle-card">
                        <div class="principle-title">交换机端口分配(QM9700 64端口为例)</div>
                        <div class="principle-desc">
                            <strong>32个端口</strong> 连接下层设备(服务器/下级交换机)<br>
                            <strong>32个端口</strong> 连接上层核心交换机<br>
                            实现1:1无阻塞设计
                        </div>
                    </div>

                    <div class="principle-card">
                        <div class="principle-title">规模规划</div>
                        <div class="principle-desc">
                            <strong>双层Fat-Tree</strong>：支持数百节点<br>
                            <strong>三层Fat-Tree</strong>：扩展至数千节点<br>
                            需精确计算交换机数量、端口分配和布线方案，成本随规模增长显著
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- 底部信息 -->
    <footer class="slide-footer">
        <div class="presenter-info">
            <div class="presenter-name">Vincent / CTO</div>
            <div class="presenter-title">吴昌辉</div>
        </div>
        <div class="slide-number">2-2 / 2-3</div>
    </footer>

    <!-- 导航控制 -->
    <div class="navigation-controls">
        <button class="nav-button" onclick="prevPage()">← 上一页</button>
        <button class="nav-button" onclick="nextPage()">下一页 →</button>
    </div>

    <script>
        function prevPage() {
            window.location.href = 'direct-connect.html';
        }

        function nextPage() {
            window.location.href = 'redundancy.html';
        }

        // 键盘导航
        document.addEventListener('keydown', function(e) {
            if (e.code === 'ArrowLeft') {
                e.preventDefault();
                prevPage();
            } else if (e.code === 'ArrowRight') {
                e.preventDefault();
                nextPage();
            } else if (e.code === 'Escape') {
                window.location.href = '../catalog.html';
            }
        });
    </script>
</body>
</html>
